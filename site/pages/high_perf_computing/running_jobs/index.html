
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="SDRE HPC wiki for end users/researchers">
      
      
      
      
        <link rel="prev" href="../using_modules/">
      
      
        <link rel="next" href="../using_gpus_with_slurm/">
      
      
      <link rel="icon" href="../../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.8">
    
    
      
        <title>Using Slurm for running jobs - Sensitive Data Research Environment Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/custom.css">
    
      <link rel="stylesheet" href="../../../stylesheets/button.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#running-jobs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Sensitive Data Research Environment Documentation" class="md-header__button md-logo" aria-label="Sensitive Data Research Environment Documentation" data-md-component="logo">
      
  <img src="../../../images/ua-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sensitive Data Research Environment Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Using Slurm for running jobs
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../basics/overview/" class="md-tabs__link">
          
  
  Basics and General

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../using_modules/" class="md-tabs__link">
          
  
  High Performance Computing

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../storage_data/storage_overview/" class="md-tabs__link">
          
  
  Storage and Data

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../software_catalog/available_software/" class="md-tabs__link">
          
  
  Software Catalog

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../related_links/python/" class="md-tabs__link">
          
  
  Related Links

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../training/connecting_to_hpc_video/" class="md-tabs__link">
          
  
  Training/Learning Resources

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../system_status/system_status/" class="md-tabs__link">
        
  
    
  
  System Status

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../placeholder.md" class="md-tabs__link">
        
  
    
  
  FAQs

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Sensitive Data Research Environment Documentation" class="md-nav__button md-logo" aria-label="Sensitive Data Research Environment Documentation" data-md-component="logo">
      
  <img src="../../../images/ua-logo.png" alt="logo">

    </a>
    Sensitive Data Research Environment Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Basics and General
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Basics and General
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/account_request/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Account Request
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/connect_to_hpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to HPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/system_specifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/linux_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/sdre_user_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SDRE User Policy
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    High Performance Computing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            High Performance Computing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Using Slurm for running jobs
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Using Slurm for running jobs
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#use-sbatch-to-submit-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Use sbatch to submit jobs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use sbatch to submit jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    <span class="md-ellipsis">
      Memory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-squeue-or-sq-to-list-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Use squeue or sq to list jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where-does-the-output-go" class="md-nav__link">
    <span class="md-ellipsis">
      Where does the output go?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accounts-and-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Accounts and projects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-job-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Examples of job scripts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples of job scripts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serial-job" class="md-nav__link">
    <span class="md-ellipsis">
      Serial job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-job" class="md-nav__link">
    <span class="md-ellipsis">
      Array job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#threaded-or-openmp-job" class="md-nav__link">
    <span class="md-ellipsis">
      Threaded or OpenMP job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mpi-job" class="md-nav__link">
    <span class="md-ellipsis">
      MPI job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu-job" class="md-nav__link">
    <span class="md-ellipsis">
      GPU job
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive jobs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring jobs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitoring jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Current jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#completed-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Completed jobs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attching-to-a-running-job" class="md-nav__link">
    <span class="md-ellipsis">
      Attching to a running job
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cancelling-jobs" class="md-nav__link">
    <span class="md-ellipsis">
      Cancelling jobs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_gpus_with_slurm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using GPUs with Slurm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../job_arrays/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Job arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resubmitting_jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resubmitting jobs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../standard_software_environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Software Environment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Storage and Data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Storage and Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage_data/storage_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage_data/data_transfer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Transfer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage_data/quota_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quota Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage_data/data_governance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Governance
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software Catalog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Software Catalog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_catalog/available_software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Lists
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_catalog/available_python_wheels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Available Python wheels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_catalog/easybuild/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Easybuild
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_catalog/virtual_environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating and using virtual environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software_catalog/apptainer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Apptainer Container
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Related Links
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Related Links
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../related_links/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../related_links/parallel_computing_python_multiprocessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parallel Computing using Python Multiprocessing Module
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Training/Learning Resources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Training/Learning Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../training/connecting_to_hpc_video/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to HPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../training/slurm_job_submission/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slurm Job Submission
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../training/rc_bootcamp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Research Computing Bootcamp
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../system_status/system_status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Status
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../placeholder.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQs
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="running-jobs"><strong>Running jobs</strong></h1>
<hr />
<!-- Reference: https://docs.alliancecan.ca/wiki/Running_jobs#Examples_of_job_scripts -->

<p>This page is intended for the user who is already familiar with the concepts of job scheduling and job scripts, and who wants guidance on submitting jobs to our clusters. If you have not worked on a large shared computer cluster before, you should probably read <a href="/pages/high_perf_computing/what_is_a_scheduler/">What is a scheduler?</a> first.</p>
<p>On our clusters, the job scheduler is the <a href="https://en.wikipedia.org/wiki/Slurm_Workload_Manager">Slurm Workload Manager</a>. Comprehensive <a href="https://slurm.schedmd.com/documentation.html">documentation for Slurm</a> is maintained by SchedMD.</p>
<h2 id="use-sbatch-to-submit-jobs"><strong>Use <code>sbatch</code> to submit jobs</strong></h2>
<hr />
<p>The command to submit a job is <code>sbatch</code>:</p>
<div class="highlight"><pre><span></span><code>$ sbatch simple_job.sh
Submitted batch job 123456
</code></pre></div>
<p>A minimal Slurm job script looks like this:</p>
<p>📥<a href="/files/high_perf_computing/running_jobs/simple_job.sh">click to download</a></p>
<div class="highlight"><span class="filename">simple_job.sh</span><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --time=00:15:00</span>
<span class="c1">#SBATCH --account=def-someuser</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;Hello, world!&#39;</span>
sleep<span class="w"> </span><span class="m">30</span>
</code></pre></div>
<p>On SDRE environment, this job reserves 1 core and 256MB of memory for 15 minutes. Directives (or options) in the job script are prefixed with <code>#SBATCH</code> and must precede all executable commands. All available directives are described on the <a href="https://slurm.schedmd.com/sbatch.html">sbatch page</a>. Our policies require that you supply at least a time limit (--time) for each job. You may also need to supply an account name (--account). See Accounts and projects below.</p>
<p>You can also specify directives as command-line arguments to <code>sbatch</code>. So for example,</p>
<div class="highlight"><pre><span></span><code>$ sbatch --time=00:30:00 simple_job.sh 
</code></pre></div>
<p>will submit the above job script with a time limit of 30 minutes. The acceptable time formats include "minutes", "minutes:seconds", "hours:minutes:seconds", "days-hours", "days-hours:minutes" and "days-hours:minutes:seconds". Please note that the time limit will strongly affect how quickly the job is started.</p>
<p>Please be cautious if you use a script to submit multiple Slurm jobs in a short time. Submitting thousands of jobs at a time can cause Slurm to become unresponsive to other users. Consider using an array job instead, or use <code>sleep</code> to space out calls to <code>sbatch</code> by one second or more.</p>
<h3 id="memory"><strong>Memory</strong></h3>
<p>Memory may be requested with --mem-per-cpu (memory per core) or --mem (memory per node). On SDRE, a default memory amount of 256 MB per core will be allocated unless you make some other request. </p>
<p>A common source of confusion comes from the fact that some memory on a node is not available to the job (reserved for the OS, etc.). The effect of this is that each node type has a maximum amount available to jobs; for instance, nominally "128G" nodes are typically configured to permit 125G of memory to user jobs. If you request more memory than a node-type provides, your job will be constrained to run on higher-memory nodes, which may be fewer in number.</p>
<p>Adding to this confusion, Slurm interprets K, M, G, etc., as binary prefixes, so <code>--mem=125G</code> is equivalent to <code>--mem=128000M</code>. See the Available memory column in the Node characteristics table for the maximum memory you can request on each node.</p>
<h2 id="use-squeue-or-sq-to-list-jobs"><strong>Use <code>squeue</code> or <code>sq</code> to list jobs</strong></h2>
<hr />
<p>The general command for checking the status of Slurm jobs is <code>squeue</code>, but by default it supplies information about <strong>all</strong> jobs in the system, not just your own. You can use the shorter <code>sq</code> to list only your own jobs:</p>
<div class="highlight"><pre><span></span><code>$ sq
   JOBID     USER      ACCOUNT      NAME  ST   TIME_LEFT NODES CPUS    GRES MIN_MEM NODELIST (REASON)
  123456   smithj   def-smithj  simple_j   R        0:03     1    1  (null)      4G cdr234  (None)
  123457   smithj   def-smithj  bigger_j  PD  2-00:00:00     1   16  (null)     16G (Priority)
</code></pre></div>
<p>The ST column of the output shows the status of each job. The two most common states are PD for <em>pending</em> or R for <em>running</em>.</p>
<p>If you want to know more about the output of <code>sq</code> or <code>squeue</code>, or learn how to change the output, see the <a href="https://slurm.schedmd.com/squeue.html">online manual page for squeue</a>. <code>sq</code> is a local customization.</p>
<p><strong>Do not</strong> run sq or squeue from a script or program at high frequency (e.g. every few seconds). Responding to <code>squeue</code> adds load to Slurm, and may interfere with its performance or correct operation. See Email notification below for a much better way to learn when your job starts or ends.</p>
<h2 id="where-does-the-output-go"><strong>Where does the output go?</strong></h2>
<hr />
<p>By default the output is placed in a file named "slurm-", suffixed with the job ID number and ".out" (e.g. <code>slurm-123456.out</code>), in the directory from which the job was submitted. Having the job ID as part of the file name is convenient for troubleshooting.</p>
<p>A different name or location can be specified if your workflow requires it by using the --output directive. Certain replacement symbols can be used in a filename specified this way, such as the job ID number, the job name, or the job array task ID. See the <a href="https://slurm.schedmd.com/sbatch.html">vendor documentation on sbatch</a> for a complete list of replacement symbols and some examples of their use.</p>
<p>Error output will normally appear in the same file as standard output, just as it would if you were typing commands interactively. If you want to send the standard error channel (stderr) to a separate file, use <code>--error</code>.</p>
<h2 id="accounts-and-projects"><strong>Accounts and projects</strong></h2>
<hr />
<p>Information about your job, like how long it waited, how long it ran, and how many cores it used, is recorded so we can monitor our quality of service and so we can report to our funders how their money is spent. Every job must have an associated account name corresponding to a resource allocation project.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --account=def-user-ab
</code></pre></div>
<p>If you try to submit a job with <code>sbatch</code> without supplying an account name, and one is needed, you will be shown a list of valid account names to choose from.</p>
<h2 id="examples-of-job-scripts"><strong>Examples of job scripts</strong></h2>
<hr />
<h3 id="serial-job"><strong>Serial job</strong></h3>
<p>A serial job is a job which only requests a single core. It is the simplest type of job. The "simple_job.sh" which appears above in Use sbatch to submit jobs is an example.</p>
<h3 id="array-job"><strong>Array job</strong></h3>
<p>Also known as a <em>task</em> array, an array job is a way to submit a whole set of jobs with one command. The individual jobs in the array are distinguished by an environment variable, <code>$SLURM_ARRAY_TASK_ID</code>, which is set to a different value for each instance of the job. The following example will create 10 tasks, with values of <code>$SLURM_ARRAY_TASK_ID</code> ranging from 1 to 10:</p>
<p>📥<a download="array_job.sh" href="/files/high_perf_computing/running_jobs/array_job.sh">click to download</a></p>
<div class="highlight"><span class="filename">array_job.sh</span><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-someuser</span>
<span class="c1">#SBATCH --time=0-0:5</span>
<span class="c1">#SBATCH --array=1-10</span>
./myapplication<span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_ID</span>
</code></pre></div>
<p>For more examples, see <a href="/pages/high_perf_computing/job_arrays/">Job arrays</a>. See <a href="https://slurm.schedmd.com/job_array.html">Job Array Support</a> for detailed documentation.</p>
<h3 id="threaded-or-openmp-job"><strong>Threaded or OpenMP job</strong></h3>
<p>This example script launches a single process with eight CPU cores. Bear in mind that for an application to use OpenMP it must be compiled with the appropriate flag, e.g. <code>gcc -fopenmp ...</code> or <code>icc -openmp ...</code></p>
<p>📥<a download="openmp_job.sh" href="/files/high_perf_computing/running_jobs/openmp_job.sh">click to download</a></p>
<div class="highlight"><span class="filename">openmp_job.sh</span><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-someuser</span>
<span class="c1">#SBATCH --time=0-0:5</span>
<span class="c1">#SBATCH --cpus-per-task=8</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span>
./ompHello
</code></pre></div>
<h3 id="mpi-job"><strong>MPI job</strong></h3>
<p>This example script launches four MPI processes, each with 1024 MB of memory. The run time is limited to 5 minutes.</p>
<p>📥<a href="/files/high_perf_computing/running_jobs/mpi_job.sh">click to download</a> {:download="mpi_job.sh"}</p>
<div class="highlight"><span class="filename">mpi_job.sh</span><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-someuser</span>
<span class="c1">#SBATCH --ntasks=4               # number of MPI processes</span>
<span class="c1">#SBATCH --mem-per-cpu=1024M      # memory; default unit is megabytes</span>
<span class="c1">#SBATCH --time=0-00:05           # time (DD-HH:MM)</span>
srun<span class="w"> </span>./mpi_program<span class="w">               </span><span class="c1"># mpirun or mpiexec also work</span>
</code></pre></div>
<p>Large MPI jobs, specifically those which can efficiently use whole nodes, should use <code>--nodes</code> and <code>--ntasks-per-node</code> instead of <code>--ntasks</code>. Hybrid MPI/threaded jobs are also possible. For more on these and other options relating to distributed parallel jobs, see <a href="https://docs.alliancecan.ca/wiki/Advanced_MPI_scheduling">Advanced MPI scheduling</a>.</p>
<p>For more on writing and running parallel programs with OpenMP, see <a href="https://docs.alliancecan.ca/wiki/OpenMP">OpenMP</a>.</p>
<h3 id="gpu-job"><strong>GPU job</strong></h3>
<p>Please see <a href="/pages/high_perf_computing/using_gpus_with_slurm/">Using GPUs with Slurm</a> for a discussion and examples of how to schedule various job types on the available GPU resources.</p>
<h2 id="interactive-jobs"><strong>Interactive jobs</strong></h2>
<hr />
<p>Though batch submission is the most common and most efficient way to take advantage of our clusters, interactive jobs are also supported. These can be useful for things like:</p>
<ul>
<li>Data exploration at the command line</li>
<li>Interactive console tools like R and iPython</li>
<li>Significant software development, debugging, or compiling</li>
</ul>
<p>You can start an interactive session on a compute node with salloc. In the following example we request one task, which corresponds to one CPU cores and 3 GB of memory, for an hour:</p>
<div class="highlight"><pre><span></span><code>$ salloc --time=1:0:0 --mem-per-cpu=3G --ntasks=1 --account=def-someuser
salloc: Granted job allocation 1234567
$ ...             # do some work
$ exit            # terminate the allocation
salloc: Relinquishing job allocation 1234567
</code></pre></div>
<p>It is also possible to run graphical programs interactively on a compute node by adding the --x11 flag to your <code>salloc</code> command. In order for this to work, you must first connect to the cluster with X11 forwarding enabled (see the SSH page for instructions on how to do that). Note that an interactive job with a duration of three hours or less will likely start very soon after submission as we have dedicated test nodes for jobs of this duration. Interactive jobs that request more than three hours run on the cluster's regular set of nodes and may wait for many hours or even days before starting, at an unpredictable (and possibly inconvenient) hour.</p>
<h2 id="monitoring-jobs"><strong>Monitoring jobs</strong></h2>
<hr />
<h3 id="current-jobs"><strong>Current jobs</strong></h3>
<p>By default squeue will show all the jobs the scheduler is managing at the moment. It will run much faster if you ask only about your own jobs with</p>
<div class="highlight"><pre><span></span><code>$ squeue -u $USER
You can also use the utility sq to do the same thing with less typing.
</code></pre></div>
<p>You can show only running jobs, or only pending jobs:</p>
<div class="highlight"><pre><span></span><code>$ squeue -u &lt;username&gt; -t RUNNING
$ squeue -u &lt;username&gt; -t PENDING
</code></pre></div>
<p>You can show detailed information for a specific job with scontrol:</p>
<div class="highlight"><pre><span></span><code>$ scontrol show job &lt;jobid&gt;
</code></pre></div>
<p>Do not run <code>squeue</code> from a script or program at high frequency (e.g., every few seconds). Responding to <code>squeue</code> adds load to Slurm and may interfere with its performance or correct operation.</p>
<p><strong>Email notification</strong></p>
<p>You can ask to be notified by email of certain job conditions by supplying options to sbatch:</p>
<div class="highlight"><pre><span></span><code>#SBATCH --mail-user=your.email@example.com
#SBATCH --mail-type=ALL
</code></pre></div>
<p>Please do not turn on these options unless you are going to read the emails they generate! It may lead to email service providers (Google, Yahoo, etc) restricting the flow of mail from the domains because one user is generating a huge volume of unnecessary emails via these options.</p>
<p>For a complete list of the options for <code>--mail-type</code> see <a href="https://slurm.schedmd.com/sbatch.html#OPT_mail-type">SchedMD's documentation</a>.</p>
<p><strong>Output buffering</strong></p>
<p>Output from a non-interactive Slurm job is normally buffered, which means that there is usually a delay between when data is written by the job and when you can see the output on a login node. Depending on the application, you are running and the load on the filesystem, this delay can range from less than a second to many minutes, or until the job completes.</p>
<p>There are methods to reduce or eliminate the buffering, but we do not recommend using them because buffering is vital to preserving the overall performance of the filesystem. If you need to monitor the output from a job in real time, we recommend you run an interactive job as described above.</p>
<h3 id="completed-jobs"><strong>Completed jobs</strong></h3>
<p>Get a short summary of the CPU and memory efficiency of a job with <code>seff</code>:</p>
<div class="highlight"><pre><span></span><code>$ seff 12345678
Job ID: 12345678
Cluster: cedar
User/Group: jsmith/jsmith
State: COMPLETED (exit code 0)
Cores: 1
CPU Utilized: 02:48:58
CPU Efficiency: 99.72% of 02:49:26 core-walltime
Job Wall-clock time: 02:49:26
Memory Utilized: 213.85 MB
Memory Efficiency: 0.17% of 125.00 GB
</code></pre></div>
<p>Find more detailed information about a completed job with <a href="https://slurm.schedmd.com/sacct.html">sacct</a>, and optionally, control what it prints using <code>--format</code>:</p>
<div class="highlight"><pre><span></span><code>$ sacct -j &lt;jobid&gt;
$ sacct -j &lt;jobid&gt; --format=JobID,JobName,MaxRSS,Elapsed
</code></pre></div>
<p>The output from <code>sacct</code> typically includes records labelled .bat+ and .ext+, and possibly .0, .1, .2, .... The batch step (<code>.bat+</code>) is your submission script - for many jobs that's where the main part of the work is done and where the resources are consumed. If you use <code>srun</code> in your submission script, that would create a <code>.0</code> step that would consume most of the resources. The extern (<code>.ext+</code>) step is basically prologue and epilogue and normally doesn't consume any significant resources.</p>
<p>If a node fails while running a job, the job may be restarted. <code>sacct</code> will normally show you only the record for the last (presumably successful) run. If you wish to see all records related to a given job, add the <code>--duplicates</code> option.</p>
<p>Use the MaxRSS accounting field to determine how much memory a job needed. The value returned will be the largest <a href="https://en.wikipedia.org/wiki/Resident_set_size">resident set size</a> for any of the tasks. If you want to know which task and node this occurred on, print the MaxRSSTask and MaxRSSNode fields also.</p>
<p>The sstat command works on a running job much the same way that sacct works on a completed job.</p>
<h3 id="attching-to-a-running-job"><strong>Attching to a running job</strong></h3>
<p>It is possible to connect to the node running a job and execute new processes there. You might want to do this for troubleshooting or to monitor the progress of a job.</p>
<p>Suppose you want to run the utility <code>nvidia-smi</code> to monitor GPU usage on a node where you have a job running. The following command runs <code>watch</code> on the node assigned to the given job, which in turn runs <code>nvidia-smi</code> every 30 seconds, displaying the output on your terminal.</p>
<div class="highlight"><pre><span></span><code>$ srun --jobid 123456 --pty watch -n 30 nvidia-smi
</code></pre></div>
<p>It is possible to launch multiple monitoring commands using <code>tmux</code>. The following command launches <code>htop</code> and <code>nvidia-smi</code> in separate panes to monitor the activity on a node assigned to the given job.</p>
<div class="highlight"><pre><span></span><code>$ srun --jobid 123456 --pty tmux new-session -d &#39;htop -u $USER&#39; \; split-window -h &#39;watch nvidia-smi&#39; \; attach
</code></pre></div>
<p>Processes launched with <code>srun</code> share the resources with the job specified. You should therefore be careful not to launch processes that would use a significant portion of the resources allocated for the job. Using too much memory, for example, might result in the job being killed; using too many CPU cycles will slow down the job.</p>
<p><strong>Note</strong>ː The <code>srun</code> commands shown above work only to monitor a job submitted with sbatch. To monitor an interactive job, create multiple panes with <code>tmux</code> and start each process in its own pane.</p>
<h2 id="cancelling-jobs"><strong>Cancelling jobs</strong></h2>
<hr />
<p>Use scancel with the job ID to cancel a job:</p>
<div class="highlight"><pre><span></span><code>$ scancel &lt;jobid&gt;
</code></pre></div>
<p>You can also use it to cancel all your jobs, or all your pending jobs:</p>
<div class="highlight"><pre><span></span><code>$ scancel -u $USER
$ scancel -t PENDING -u $USER
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.path", "navigation.instant", "navigation.top", "toc.integrate", "toc.follow", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.code.select", "content.download", "content.tooltips", "content.tabs", "grid", null], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../../javascripts/tablesort.js"></script>
      
    
  </body>
</html>